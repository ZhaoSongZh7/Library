<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="create-container">
        <button class="create-book">New Book</button>
        <input type="text" id="title" placeholder="Title">
        <input type="text" id="author" placeholder="Author">
        <input type="text" id="pages" placeholder="Pages(Number)">
        <input type="checkbox" id="readAlready">
    </div>
    <div class="books-grid"></div>
    <script>
        let myLibrary = []
        const bookShelf = document.querySelector('.books-grid');
        const createBook = document.querySelector('.create-book');
        const titleInput = document.querySelector('#title');
        const authorInput = document.querySelector('#author');
        const pagesInput = document.querySelector('#pages');
        const readAlreadyInput = document.querySelector('#readAlready');
        const booksGrid = document.querySelector('.books-grid');
        let attributeCount = 0;

        function Book(title, author, pages, readBook) {
            this.title = title;
            this.author = author;
            this.pages = pages;
            this.readBook = readBook;
            this.info = function () {
                return `${title} by ${author}, ${pages} pages, ${readBook}`
            }
        }

        function addBookToLibrary() {
            const titleValue = titleInput.value;
            const authorValue = authorInput.value;
            const pagesValue = pagesInput.value;
            const checkBoxChecked = readAlreadyInput.checked;
            const newBook = new Book(titleValue, authorValue, pagesValue, checkBoxChecked);
            myLibrary.push(newBook);
            libraryBooks(myLibrary);
        }

        function libraryBooks(array) {
            attributeCount += 1
            for (let i = 0; i < array.length; i++) {
                const cardContainer = document.createElement('div');
                const titleDiv = document.createElement('div');
                const authorDiv = document.createElement('div');
                const pagesDiv = document.createElement('div');
                const checkedDiv = document.createElement('div');
                const deleteButton = document.createElement('button');
                cardContainer.style.marginBottom = '20px'
                cardContainer.dataset.attribute = i
                deleteButton.dataset.attribute = i
                titleDiv.innerHTML = 'Title: ' + array[i].title;
                authorDiv.innerHTML = 'Author: ' + array[i].author;
                pagesDiv.innerHTML = 'Pages: ' + array[i].pages;
                checkedDiv.innerHTML = 'Read: ' + array[i].readBook;
                deleteButton.innerHTML = 'Delete';
                cardContainer.appendChild(titleDiv);  
                cardContainer.appendChild(authorDiv);
                cardContainer.appendChild(pagesDiv);
                cardContainer.appendChild(checkedDiv);
                cardContainer.appendChild(deleteButton);
                bookShelf.appendChild(cardContainer);
                deleteButton.addEventListener('click', function(e) {
                    checkDataAttribute = e.target.dataset.attribute
                    cardContainer.parentNode.removeChild(cardContainer)
                    console.log(checkDataAttribute)
                    console.log(myLibrary)
                })
            }
        } 

        createBook.addEventListener('click', function() {
            booksGrid.innerHTML = '';
            addBookToLibrary();
            console.log(myLibrary);
        })

        const theHobbit = new Book('The Hobbit', 'J.R.R Tolkien', 295, 'not read yet');
        console.log(theHobbit.info());
    </script>
</body>
</html>